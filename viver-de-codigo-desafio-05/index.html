<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Calculadora Moderna</title>
<style>
  :root {
    --color-bg: #1a1a1a;
    --color-btn: #00212a;
    --color-btn-hover: #021212;
    --color-operator: #fa9100;
    --color-operator-hover: #fa920098;
    --color-equal: #01D9FD;
    --color-equal-hover: #01d7fda1;
    --color-clear: #fb261e;
    --color-clear-hover: #fb251e98;
    --color-text: #adadad;
  }

  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background-image: url("background.jpg");
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    padding: 20px;
    box-sizing: border-box;
    background-size: cover;
    background-position: center;
  }

  .calculator {
    background: linear-gradient(145deg, #2a2a2a, var(--color-bg));
    padding: 25px;
    border-radius: 25px;
    width: 320px;
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .calculator-title {
    color: var(--color-text);
    text-align: center;
    margin: 0 0 20px 0;
    font-size: 24px;
    font-weight: 300;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    letter-spacing: 1px;
  }

  #display {
    width: 100%;
    height: 60px;
    font-size: 28px;
    font-weight: 300;
    text-align: right;
    margin-bottom: 20px;
    padding: 15px;
    box-sizing: border-box;
    border: none;
    border-radius: 15px;
    background: linear-gradient(145deg, #3a3a3a, #2a2a2a);
    color: var(--color-text);
    box-shadow:
      inset 0 2px 4px rgba(0, 0, 0, 0.3),
      0 1px 0 rgba(255, 255, 255, 0.1);
    outline: none;
    font-family: "Courier New", monospace;
    user-select: text;
  }

  #display:focus {
    box-shadow:
      inset 0 2px 4px rgba(0, 0, 0, 0.3),
      0 1px 0 rgba(255, 255, 255, 0.1),
      0 0 0 3px rgba(102, 126, 234, 0.3);
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
  }

  button {
    padding: 20px;
    font-size: 20px;
    font-weight: 500;
    border: none;
    border-radius: 15px;
    background: var(--color-btn);
    color: var(--color-text);
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow:
      0 4px 8px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    position: relative;
    overflow: hidden;
    user-select: none;
    transform-origin: center;
  }

  button:hover {
    background: var(--color-btn-hover);
    transform: translateY(-2px);
    box-shadow:
      0 6px 12px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  button:active {
    transform: translateY(0);
    box-shadow:
      0 2px 4px rgba(0, 0, 0, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
  }

  .operator {
    background: var(--color-operator);
    color: white;
    box-shadow: 0 4px 12px #f39c12aa;
  }

  .operator:hover {
    background: var(--color-operator-hover);
  }

  .clear {
    background: var(--color-clear);
    color: white;
  }

  .clear:hover {
    background: var(--color-clear-hover);
  }

  .equal {
    background: var(--color-equal);
    color: white;
    grid-row: span 2;
    box-shadow: 0 4px 15px #6a82fbcc;
  }

  .equal:hover {
    background: var(--color-equal-hover);
  }

  /* Responsividade */
  @media (max-width: 400px) {
    .calculator {
      width: 280px;
      padding: 20px;
    }

    button {
      padding: 15px;
      font-size: 18px;
    }

    #display {
      height: 50px;
      font-size: 24px;
    }
  }
</style>
</head>
<body>

<div class="calculator">
  <input type="text" id="display" readonly placeholder="0" />
  <div class="buttons">
    <button class="clear">C</button>
    <button class="operator">/</button>
    <button class="operator">*</button>
    <button class="operator">-</button>

    <button>7</button>
    <button>8</button>
    <button>9</button>
    <button class="operator">+</button>

    <button>4</button>
    <button>5</button>
    <button>6</button>
    <button class="equal">=</button>

    <button>1</button>
    <button>2</button>
    <button>3</button>

    <button>0</button>
    <button>.</button>
  </div>
</div>

<script>
  const display = document.getElementById("display");
  let lastInputIsOperator = false;
  let justCalculated = false;

  function isOperator(char) {
    return ['+', '-', '*', '/'].includes(char);
  }

  function appendValue(value) {
    if (justCalculated) {
      // Depois de calcular, só números e ponto começam uma nova expressão
      if (!isOperator(value)) {
        display.value = '';
      }
      justCalculated = false;
    }

    if (display.value === "Erro") {
      display.value = "";
    }

    if (isOperator(value)) {
      if (display.value === "") {
        if (value !== '-') return; // só permite '-' para começar negativo
      } else if (isOperator(display.value.slice(-1))) {
        // substituir operador no final
        display.value = display.value.slice(0, -1);
      }
      lastInputIsOperator = true;
    } else {
      lastInputIsOperator = false;
    }

    display.value += value;
  }

  function clearDisplay() {
    display.value = "";
    lastInputIsOperator = false;
    justCalculated = false;
  }

  function calculateResult() {
    if (display.value === "") return;

    let expression = display.value;

    // Remove operadores do final antes de calcular
    while (isOperator(expression.slice(-1))) {
      expression = expression.slice(0, -1);
    }

    try {
      let result = eval(expression);
      display.value = result;
      justCalculated = true;
      lastInputIsOperator = false;
    } catch {
      display.value = "Erro";
      justCalculated = true;
    }
  }

  // Eventos
  document.querySelectorAll(".buttons button").forEach(button => {
    button.addEventListener("click", () => {
      if (button.classList.contains("clear")) {
        clearDisplay();
      } else if (button.classList.contains("equal")) {
        calculateResult();
      } else {
        appendValue(button.textContent);
      }
    });
  });
</script>

</body>
</html>
